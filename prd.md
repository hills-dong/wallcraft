WallCraft 产品需求文档 (PRD)
文档版本：1.0
状态：已发布
适用范围：指导开发团队进行 WallCraft 桌面端的重构与开发

1. 产品概述 (Product Overview)
WallCraft 是一款专为 macOS 设计的高级壁纸管理工具，旨在为多显示器用户提供极致的壁纸体验。它通过集成 Unsplash 高清图库，打破了传统壁纸应用仅对单屏幕支持的局限，能够智能识别多屏幕布局，将一张超高清壁纸完美裁剪并跨屏显示，营造沉浸式的桌面视觉效果。同时支持跨工作区（Spaces）的壁纸同步，确保桌面美学的一致性。

核心价值
沉浸式多屏体验：支持将单张大图跨屏幕展示（Spanning Wallpaper），通过智能裁剪适配不同分辨率和位置的显示器。
全空间同步：解决 macOS 原生限制，确保壁纸应用到所有桌面空间（Virtual Desktops/Spaces）。
极简与自动化：常驻后台，支持定时自动更换壁纸，让桌面保持新鲜感。
2. 用户流程 (User Flow)
初始设置：用户启动应用 -> 输入 Unsplash API Key（或引导获取） -> 应用检测屏幕布局。
浏览壁纸：用户浏览推荐分类或通过关键词搜索壁纸 -> 列表展示高清缩略图。
预览与调整：点击壁纸 -> 进入预览模式 -> 查看壁纸在当前多屏布局下的裁剪/跨屏效果。
应用壁纸：点击“应用” -> 壁纸自动下载、裁剪并设置到所有屏幕 -> 提示成功。
后台运行：应用最小化至托盘 -> 根据设定频率自动更新壁纸。
3. 功能需求 (Functional Requirements)
3.1 屏幕管理与检测
自动检测：应用启动时自动识别当前连接的所有显示器及其物理排列位置（坐标）、分辨率。
布局可视化：在设置面板中以图形化方式展示当前屏幕排列（如“左：4K屏，右：1080P屏”），并标注屏幕序号和分辨率，帮助用户直观确认。
手动刷新：提供刷新按钮，以便在插拔显示器后更新布局状态。
3.2 壁纸图库 (Unsplash 集成)
API 集成：支持用户输入个人的 Unsplash API Access Key 以获取高配额访问。
分类浏览：侧边栏展示 Unsplash 热门分类（Topics），如“自然”、“建筑”、“纹理”等，支持点击切换。
关键词搜索：顶部提供搜索框，支持输入中文/英文关键词搜索特定壁纸。
无限加载：壁纸列表支持分页加载（点击“加载更多”或滚动加载），展示图片作者、尺寸信息。
骨架屏加载：在图片加载过程中展示骨架屏动画，提升体验。
3.3 智能预览系统
大图预览：点击列表图片后弹出模态窗口展示完整大图。
跨屏裁剪预览 (Split Preview)：
根据当前屏幕的物理布局，实时生成“跨屏效果预览图”。
展示每一块屏幕将显示大图的哪一部分区域（Crop）。
显示每块屏幕的对应关系（如“屏幕 1：显示图片左侧”，“屏幕 2：显示图片右侧”）。
作者署名：显著展示摄影师名称及 Unsplash 个人主页链接，遵循 Unsplash 归属权规范。
3.4 壁纸设置与应用 (核心功能)
一键应用：点击“应用到所有屏幕”按钮，执行以下自动化流程：
下载原图（High Res）。
根据屏幕分辨率和位置，智能裁剪图片（或通过系统 API 设置填充模式）。
全空间覆盖：确保壁纸不仅应用到当前显示的桌面，还必须同步更新到该显示器的所有虚拟桌面（Spaces/Desktops）。
状态反馈：实时显示每个屏幕的应用状态（成功/失败），全部成功后发送系统通知。
3.5 自动化与设置
定时更新：
支持设置更新频率：手动、每 30 分钟、每 1 小时、每 6 小时、每天。
定时任务在后台静默执行，自动下载并应用当前分类下的新壁纸。
系统托盘：
应用关闭主窗口后不退出，常驻菜单栏系统托盘。
托盘菜单提供：打开主界面、立即切换下一张、退出应用。
4. 用户界面与交互 (UI/UX)
设计风格：虽然不指定技术实现，但要求界面呈现 Modern macOS 风格（类似原生应用）。
侧边栏（Sidebar）与内容区（Main Content）的分栏布局。
使用圆角、阴影和磨砂玻璃效果（可选）。
响应式布局：适应不同尺寸的窗口。
交互细节：
按钮点击需有加载状态（Loading Spinner）。
错误提示需通过 Toast 消息条或非阻断式提示展示。
图片悬停显示详细信息（作者、尺寸）。
5. 非功能需求 (Non-functional Requirements)
性能要求：
应用体积应尽可能小巧（建议 < 20MB）。
内存占用低，后台运行时不影响系统性能。
图片处理（下载/裁剪）速度快，避免长时间阻塞 UI。
兼容性：
必须支持 macOS 平台。
必须兼容 macOS 的多桌面（Spaces）机制，包括最新的 macOS 15+ 系统。
权限管理：
需引导用户授予必要的网络权限和磁盘写入权限（用于保存壁纸）。
6. 附录：数据字典
Screen Object: { id, name, x, y, width, height, scaleFactor }
Settings Object: { apiKey, topicSlug, updateInterval }
